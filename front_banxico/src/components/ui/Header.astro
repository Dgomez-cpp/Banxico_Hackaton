---
/*
 Header reutilizable
 Props:
  - logo: ruta al logo (default carga /src/assets/Banxico_logo.svg si existe)
  - links: array de { href, label } opcional
*/
const defaults = {
  logo: "/src/assets/Banxico_logo.svg",
  links: [
    { href: "/", label: "Inicio" },
    { href: "/instrumentos", label: "Servicios financieros" },
    { href: "/pagos", label: "Pagos" },
    { href: "/accesibilidad", label: "Accesibilidad" },
    { href: "/soporte", label: "Soporte" },
  ],
};

const { logo = defaults.logo, links = defaults.links } = Astro.props;
---

<header class="hb-root" role="banner" aria-label="Main header">
  <div class="hb-inner">
    <a class="hb-logo" href="/" aria-label="Home">
      <img src={logo} alt="Logo" />
      <span class="hb-brand">Conexion Total</span>
    </a>

    <nav class="hb-nav" role="navigation" aria-label="Main navigation">
      <ul class="hb-menu">
        {links.map((link: { href: string | URL | null | undefined; label: unknown; }) => (
 <li><a href={link.href}>{link.label}</a></li>
        ))}
      </ul>
    </nav>

    <button class="hb-toggle" aria-expanded="false" aria-label="Abrir menú">
      <span class="hb-burger" />
    </button>
  </div>
</header>

<script>
  // pequeño script para toggle del menú en móvil
  (() => {
    const root = document.querySelector('.hb-root');
    const btn = root?.querySelector('.hb-toggle');
    const menu = root?.querySelector('.hb-menu');
    if (root && btn && menu) {
      btn.addEventListener('click', () => {
        const open = root.classList.toggle('open');
        btn.setAttribute('aria-expanded', String(open));
      });
    }
  })();
</script>

<style>
  /* Import fonts solo para header (evita tocar global.css) */
  @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Parisienne&display=swap');

  :root {
    /* fallback colors if global.css no cargó */
    --color1: #2b4a7e;
    --color2: #005a89;
    --color3: #007698;
    --color4: #00a0a4;
    --color5: #00daa5;
    --muted: #6b7280;
  }

  .hb-root {
    width: 100%;
    position: sticky;
    top: 0;
    z-index: 60;
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    box-shadow: 0 4px 18px rgba(2,8,23,0.06);
    background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  }

  .hb-inner{
    max-width: 1100px;
    margin: 0 auto;
    padding: 10px 20px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap: 16px;
  }

  /* logo / brand */
  .hb-logo {
    display:inline-flex;
    align-items:center;
    gap: 12px;
    text-decoration: none;
    color: var(--color1);
    cursor: pointer;
  }
  .hb-logo img {
    width: 44px;
    height: auto;
    display:block;
  }
  .hb-brand {
    font-family: 'Parisienne', cursive;
    font-size: 1.15rem;
    color: var(--color1);
    font-weight: 700;
    user-select: none;
  }

  /* nav desktop */
  .hb-nav { display:block; }
  .hb-menu {
    display:flex;
    list-style:none;
    gap: 8px;
    margin: 0;
    padding: 0;
    align-items:center;
  }
  .hb-menu li { display:inline-flex; }
  .hb-menu a{
    display:inline-block;
    padding: 10px 14px;
    color: var(--color1);
    text-decoration:none;
    font-family: 'Quicksand', system-ui, sans-serif;
    font-weight:600;
    border-radius: 10px;
    transition: all .16s ease;
    background: linear-gradient(90deg, rgba(0,0,0,0.12), rgba(255,255,255,0.02));
  }
  .hb-menu a:hover{
    color: var(--color5);
    transform: translateY(-2px);
    box-shadow: inset 0 -6px 20px rgba(0,0,0,0.12);
  }

  /* toggle (mobile) */
  .hb-toggle {
    display:none;
    background: transparent;
    border: none;
    width:44px;
    height:44px;
    border-radius: 10px;
    align-items:center;
    justify-content:center;
    cursor:pointer;
  }
  .hb-burger {
    display:block;
    width:22px;
    height:2px;
    background:var(--color1);
    position:relative;
    border-radius:2px;
  }
  .hb-burger::before,
  .hb-burger::after {
    content: "";
    position:absolute;
    left:0;
    width:22px;
    height:2px;
    background:var(--color1);
    border-radius:2px;
    transition: transform .18s ease, opacity .18s ease;
  }
  .hb-burger::before { top:-7px; }
  .hb-burger::after { top:7px; }

  /* small screens: hide menu, show button */
  @media (max-width:820px){
    .hb-menu { display:none; position:absolute; top:100%; right:16px; background: rgba(0,0,0,0.6); padding:12px; border-radius:12px; flex-direction:column; gap:6px; min-width:160px; }
    .hb-toggle { display:inline-flex; }
    /* when open */
    .hb-root.open .hb-menu { display:flex; }
    .hb-root.open .hb-burger { background: transparent; }
    .hb-root.open .hb-burger::before { transform: rotate(45deg) translate(3px, 3px); }
    .hb-root.open .hb-burger::after { transform: rotate(-45deg) translate(3px, -3px); }
  }

  /* visual polish */
  .hb-menu a { font-size: 0.95rem; color: var(--color1); }
  .hb-menu a:hover { color: var(--color4); text-decoration:none; }

  /* optional: center header-bar effect (inspired by your design) */
  .hb-inner::before{
    content: "";
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: calc(100% - 10px);
    width: 50%;
    height: 10px;
    border-top: 10px solid rgba(255,255,255,0.06);
    border-left: 10px solid rgba(255,255,255,0.02);
    pointer-events: none;
    border-radius: 10px;
  }
</style>
